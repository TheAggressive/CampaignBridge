/**
 * CampaignBridge File Input Component
 *
 * Styled file upload input component with current file display and requirements.
 * Follows BEM CSS class naming conventions.
 */

/* File input field - clean and simple */
.campaignbridge-field__file {
  /* Clean button appearance */
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: var(--form-radius);
  font-size: var(--text-sm, 0.875rem);
  font-weight: var(--font-weight-medium, 500);
  white-space: nowrap;
  transition: var(--form-transition);
  cursor: pointer;
  position: relative;
  overflow: hidden;

  /* Simple styling */
  background-color: var(--color-background);
  color: var(--color-foreground);
  border: 1px solid var(--color-border);
  padding-inline: calc(var(--spacing, 0.25rem) * 4);
  padding-block: calc(var(--spacing, 0.25rem) * 2.5);
  min-height: calc(var(--spacing, 0.25rem) * 10);

  /* File input specific */

  /* Hide the default file input text */
  &::file-selector-button {
    display: none;
  }

  /* Add simple upload text */
  &::before {
    content: 'ðŸ“Ž Choose file';
    pointer-events: none;
  }

  /* Clean hover effect */
  &:hover {
    background-color: var(--color-accent);
    border-color: var(--color-accent-foreground);
  }

  &:focus {
    --tw-ring-shadow: var(--tw-ring-inset,) 0 0 0
      calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);
    box-shadow:
      var(--tw-inset-shadow), var(--tw-inset-ring-shadow),
      var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
    --tw-ring-offset-width: 2px;
    --tw-ring-offset-shadow: var(--tw-ring-inset,) 0 0 0
      var(--tw-ring-offset-width) var(--tw-ring-offset-color);
    --tw-outline-style: none;
    outline-style: none;
    --tw-ring-color: var(--form-focus-ring-color);
    --tw-ring-offset-width: var(--form-focus-ring-offset);
  }

  /* Disabled state */
  &:disabled {
    cursor: not-allowed;
    opacity: 0.5;
    pointer-events: none;
    box-shadow: none;
    transform: none;
  }

  /* Show selected file name */
  &:not(:placeholder-shown)::before {
    content: 'ðŸ“„ ' attr(data-file-name);
    max-width: calc(var(--spacing, 0.25rem) * 32);
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  /* When file is selected, subtle success indication */
  &:not(:placeholder-shown) {
    background-color: var(--color-success-light);
    border-color: var(--color-success);
  }
}

/* Current files display */
.current-files {
  margin-top: calc(var(--spacing, 0.25rem) * 2);
  padding: calc(var(--spacing, 0.25rem) * 2.5);
  background-color: var(--color-muted);
  border: 1px solid var(--color-border);
  border-radius: var(--form-radius);
  border-style: var(--tw-border-style);
  border-width: 1px;
}

.current-file {
  margin-block: calc(var(--spacing, 0.25rem) * 1.25);
  margin-inline: 0;
  font-size: var(--text-xs, 0.75rem);
  line-height: var(--tw-leading, var(--text-xs--line-height, calc(1 / 0.75)));
  color: var(--color-muted-foreground);

  p {
    margin: 0;
    font-size: var(--text-xs, 0.75rem);
    line-height: var(--tw-leading, var(--text-xs--line-height, calc(1 / 0.75)));
  }

  a {
    color: var(--color-primary);
    text-decoration: underline;

    &:hover {
      color: var(--color-primary-hover);
    }
  }
}

/* File requirements */
.file-requirements {
  margin-top: calc(var(--spacing, 0.25rem) * 2);
  padding: calc(var(--spacing, 0.25rem) * 2.5);
  background-color: var(--color-info-light);
  border: 1px solid var(--color-info);
  border-radius: var(--form-radius);
  border-style: var(--tw-border-style);
  border-width: 1px;

  .description {
    margin-block: calc(var(--spacing, 0.25rem) * 1.25);
    margin-inline: 0;
    color: var(--color-info-dark);
    font-size: var(--text-xs, 0.75rem);
    line-height: var(--tw-leading, var(--text-xs--line-height, calc(1 / 0.75)));
    font-style: italic;
  }
}

/* Multiple files layout */
.campaignbridge-file--multiple {
  .current-files {
    max-height: calc(var(--spacing, 0.25rem) * 40);
    overflow-y: auto;
  }

  .current-file {
    padding: calc(var(--spacing, 0.25rem) * 1.5);
    background-color: var(--color-background);
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius-sm);
    margin-bottom: calc(var(--spacing, 0.25rem) * 2);
  }
}

/* Drag and drop area (for enhanced file inputs) */
.campaignbridge-file-dropzone {
  border: 2px dashed var(--color-border);
  border-radius: var(--form-radius);
  padding: calc(var(--spacing, 0.25rem) * 4);
  text-align: center;
  background-color: var(--color-muted);
  transition: var(--form-transition);
  cursor: pointer;

  &:hover,
  &.dragover {
    border-color: var(--color-primary);
    background-color: var(--color-accent);
  }

  p {
    margin: 0;
    font-size: var(--text-sm, 0.875rem);
    line-height: var(
      --tw-leading,
      var(--text-sm--line-height, calc(1.25 / 0.875))
    );
    color: var(--color-muted-foreground);

    .campaignbridge-file-dropzone:hover &,
    .campaignbridge-file-dropzone.dragover & {
      color: var(--color-foreground);
    }
  }
}

/* File input with drag and drop */
.campaignbridge-file--dragdrop {
  position: relative;

  .campaignbridge-field__file {
    position: absolute;
    width: 100%;
    height: 100%;
    opacity: 0;
    cursor: pointer;
  }

  .campaignbridge-file-dropzone {
    pointer-events: none;
  }
}

/* Error states */
.campaignbridge-file--error {
  .campaignbridge-field__file,
  .campaignbridge-file-dropzone {
    border-color: var(--color-error);
  }

  .current-files,
  .file-requirements {
    border-color: var(--color-error);
    background-color: var(--color-error-light);
  }
}

/* Success states */
.campaignbridge-file--success {
  .campaignbridge-field__file,
  .campaignbridge-file-dropzone {
    border-color: var(--color-success);
  }

  .current-files {
    border-color: var(--color-success);
    background-color: var(--color-success-light);
  }
}

/* Loading states */
.campaignbridge-file--loading {
  .campaignbridge-field__file,
  .campaignbridge-file-dropzone {
    opacity: 0.6;
    pointer-events: none;
  }

  &::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: calc(var(--spacing, 0.25rem) * 4);
    height: calc(var(--spacing, 0.25rem) * 4);
    margin: calc(var(--spacing, 0.25rem) * -2) 0 0
      calc(var(--spacing, 0.25rem) * -2);
    border: 2px solid var(--color-primary);
    border-top: 2px solid transparent;
    border-radius: 50%;
    animation: spin 1s linear infinite;
  }
}

@keyframes spin {
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .campaignbridge-file-dropzone {
    padding: calc(var(--spacing, 0.25rem) * 3);
  }
}
